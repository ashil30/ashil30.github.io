<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Monthly Data Line Chart</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }

        .line {
            fill: none;
            stroke-width: 1.5px;
        }
    </style>
</head>
<body>
    <svg width="960" height="500"></svg>
    <script>
        const margin = {top: 20, right: 80, bottom: 30, left: 50},
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        const svg = d3.select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        const x = d3.scaleBand().range([0, width]).padding(0.1),
              y = d3.scaleLinear().range([height, 0]);

        const color = d3.scaleOrdinal(d3.schemeCategory10);

        d3.csv("data.csv", d => {
            d['2011.00'] = +d['Unnamed: 1'];
            d['2012.00'] = +d['Unnamed: 2'];
            d['2013.00'] = +d['Unnamed: 3'];
            d['2014.00'] = +d['Unnamed: 4'];
            d['2015.00'] = +d['Unnamed: 5'];
            d['2016.00'] = +d['Unnamed: 6'];
            d['2017.00'] = +d['Unnamed: 7'];
            d['2018.00'] = +d['Unnamed: 8'];
            return d;
        }).then(data => {
            const years = data.columns.slice(1).map(d => d.replace('Unnamed: ', ''));

            x.domain(data.map(d => d['Month/Year']));
            y.domain([0, d3.max(data, d => d3.max(years, year => d[year]))]);

            svg.append("g")
               .attr("class", "x axis")
               .attr("transform", "translate(0," + height + ")")
               .call(d3.axisBottom(x));

            svg.append("g")
               .attr("class", "y axis")
               .call(d3.axisLeft(y));

            const line = d3.line()
                .x(d => x(d['Month/Year']) + x.bandwidth() / 2)
                .y(d => y(d.value));

            const months = data.map(d => d['Month/Year']);

            years.forEach((year, index) => {
                svg.append("path")
                    .datum(data.map(d => ({'Month/Year': d['Month/Year'], 'value': d[year]})))
                    .attr("class", "line")
                    .attr("d", line)
                    .style("stroke", color(index));
            });
        });
    </script>
</body>
</html>
